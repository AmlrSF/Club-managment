<main>
  <div
    class="head-title py-2 border-b-[1.5px] flex justify-between items-center border-[rgba(0,0,0,0.2)]"
  >
    <div class="left">
      <div class="flex flex-col gap-2 mb-5">
        <h2 class="text-3xl font-bold">Create new Squad</h2>
        <p class="text-gray-500">
          Create a group where you can learn and interact privately with other
          developers around topics that matter to you
        </p>
      </div>
      <ul class="breadcrumb">
        <li>
          <a href="#">Dashboard</a>
        </li>
        <li>/</li>
        <li>
          <a class="active" href="#">Squads</a>
        </li>
      </ul>
    </div>
    <div>
      <button
        routerLink="/squads/new"
        class="bg-purple-600 px-4 py-2 text-white rounded-xl font-bold"
      >
        New Squad
      </button>
    </div>
  </div>

  <div class="flex flex-col mt-5 gap-10">
    <div *ngFor="let genre of getGenres()">
      <h3 class="text-2xl font-semibold mb-2">{{ genre }}</h3>
      <div class="container-squads">
        <div *ngFor="let club of getClubsByGenre(genre)">
          <div class="club-card bg-white p-2 shadow-sm rounded-xl">
            <div class="flex items-center justify-between">
              <img
                class="w-[50px] h-[50px] rounded-full"
                [src]="
                  club?.profilePicture
                    ? club.profilePicture
                    : '../../assets/nogroupe.png'
                "
                alt="user photo"
              />
              <div>
                   <!-- Button for users who are neither owners nor members -->
              <button
              *ngIf="
                
                !club.members.includes(customer._id) &&  !club.moderators.includes(customer._id)
              "
              class="px-4 py-2 border bg-[#9333ea] rounded-xl text-white"
              (click)="joinSquad(club._id)"
            >
              Join Squad
            </button>

            <!-- Button for the owner of the squad -->
            <button
              *ngIf="club.ownerId._id === customer._id || club.moderators.includes(customer._id)"
              (click)="navigateToManagementSquad(club._id)"
              class="px-4 py-2 border bg-purple-600 rounded-xl text-white cursor-not-allowed"
              
            >
              Manage
            </button>

            <!-- Button for users who are already in the squad -->
            <button
              *ngIf="
                club.members.includes(customer._id) 
              "
              class="px-4 py-2 border bg-green-500 rounded-xl text-white cursor-not-allowed"
              disabled
            >
              Already in Squad
            </button>
              </div>
            </div>
            <div class="flex flex-col mt-2">
              <span
                class="text-xl font-bold hover:underline"
                (click)="navigateto(club._id)"
                >{{ club.name }}</span
              >
              <p class="text-md text-gray-500">{{ club.description }}</p>
              <div class="flex items-center justify-between mt-2">
                <span>&#64;{{ club.clubname }}</span>

                <span class="font-bold flex"
                  >{{ club.members.length }} members</span
                >
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>
